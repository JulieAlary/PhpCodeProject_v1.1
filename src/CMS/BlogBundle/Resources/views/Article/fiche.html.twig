{% extends "CMSBlogBundle::layout.html.twig" %}

{% block title %}
    Lecture d'un article - {{ parent() }}
{% endblock %}

{% block cms_body %}

    <div style="float: left; margin-right: 1em;">
        {% if article.image is not null %}
            <img
                    src="{{ asset(article.image.uploadDir ~ '/' ~ article.image.id ~ '.' ~ article.image.url) }}"
                    alt="{{ article.image.alt }}"
                    height="60"
            />
        {% endif %}
    </div>

    <h2>{{ article.title }}</h2>
    <i>Par {{ article.author }}, le {{ article.date|date('d/m/Y') }}</i>

    <div class="well">
        {{ article.content }}
    </div>

    {% for content in comment %}
        <li>{{ content.content }}</li>
    {% endfor %}
    {{ form(form) }}

    <div class="well">
        {% if not article.categories.empty %}
            <p>Cet article est paru dans les catégories suivantes:
                {% for category in article.categories %}
                    {{ category.name }}{% if not loop.last %}, {% endif %}
                {% endfor %}
            </p>
        {% endif %}
    </div>

    <p>
        <a href="{{ path('cms_blog_home') }}" class="btn btn-default">
            <i class="glyphicon glyphicon-chevron-left"></i>
            Retour à la liste
        </a>
        {% if is_granted('ROLE_AUTEUR') %}
            <a href="{{ path('cms_blog_edit', {'id': article.id}) }}" class="btn btn-default">
                <i class="glyphicon glyphicon-edit"></i>
                Modifier l'annonce
            </a>
            <a href="{{ path('cms_blog_delete', {'id': article.id}) }}" class="btn btn-danger">
                <i class="glyphicon glyphicon-trash"></i>
                Supprimer l'annonce
            </a>
        {% endif %}
    </p>

{% endblock %}